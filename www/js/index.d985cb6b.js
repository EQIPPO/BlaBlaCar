(function(){var e={9030:function(e){function t(e,t="GET",s={},n={}){return new Promise(((r,o)=>{n["Content-Type"]="application/json",fetch(e,{method:t,headers:n,body:"GET"!=t?JSON.stringify(s):void 0}).then((e=>e.json())).then((e=>{r(e)})).catch((e=>{o(e)}))}))}function s(e,s={},n={}){return t(e,"POST",s,n)}function n(e,s={},n={}){return t(e,"GET",s,n)}function r(e,s={},n={}){return t(e,"DELETE",s,n)}function o(e,s={},n={}){return t(e,"PATCH",s,n)}function a(e){let t="?";for(let s in e)void 0!==e[s]&&null!==e[s]&&(e[s]instanceof String&&e[s].length<1||e[s]instanceof Number&&isNaN(e[s])||(t+=s+"="+e[s]+"&"));return t=t.slice(0,-1),t.length<1?"":t}const i="/api";e.exports={parseForm:e=>{let t={};for(let s=0;s<e.length;s++)"submit"!==e[s].type&&(t[e[s].name]=e[s].value);return t},login:async(e,t)=>{if(""===e||""===t)throw"Логін та пароль не можуть бути пустими";const n=await s(i+"/auth/login",{login:e,password:t});if(200===n.status)return localStorage.setItem("token",n.token),localStorage.setItem("user",JSON.stringify(n.user)),n.user;switch(n.status){case 400:throw"Логін та пароль не можуть бути пустими";case 401:throw"Невірний логін або пароль";default:throw n.message}},register:async(e,t,n)=>{const r=await s(i+"/auth/register",{login:t,password:n,name:e});if(200===r.status)return localStorage.setItem("token",r.token),localStorage.setItem("user",JSON.stringify(r.user)),r.user;switch(r.status){default:throw r.message}},isLoggedIn:()=>null!==localStorage.getItem("token"),getToken:()=>localStorage.getItem("token"),getCurrentUser:()=>JSON.parse(localStorage.getItem("user")),logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user")},checkPerms:async()=>{if(!e.exports.isLoggedIn())throw"Ви не авторизовані";const t="Bearer "+localStorage.getItem("token"),s=await n(i+"/admin/perms",{},{authorization:t});if(200===s.status)return s.havePermission;throw s.message},getProfile:async t=>{if(!t&&!e.exports.isLoggedIn())throw"Ви не авторизовані, або не вказано id користувача";t||(t=e.exports.getCurrentUser().id);const s=await n(i+"/rating/user/"+t);if(200===s.status)return{name:s.name,average:s.average,comments:s.ratings,created_at:s.created_at};if(404===s.status)throw"Користувача не знайдено";throw s.message},postComment:async(t,n)=>{if(!e.exports.isLoggedIn())throw"Ви не авторизовані";if(t==e.exports.getCurrentUser().id)throw"Ви не можете залишити відгук самому собі";const r="Bearer "+localStorage.getItem("token"),o=await s(i+"/rating/user/"+t,n,{authorization:r});if(200===o.status)return o;throw o.message},editName:async t=>{if(!e.exports.isLoggedIn())throw"Ви не авторизовані";if(""==t)throw"Ім'я не може бути пустим";const n="Bearer "+localStorage.getItem("token"),r=await s(i+"/auth/change-name",{name:t},{authorization:n});if(200===r.status){let s=e.exports.getCurrentUser();return s.name=t,localStorage.setItem("user",JSON.stringify(s)),r}throw r.message},getHints:async e=>{const t=await n(i+"/trips/hints/?q="+e);if(200===t.status)return t.hints;throw t.message},createRide:async(t,n,r,o,a)=>{if(!e.exports.isLoggedIn())throw"Ви не авторизовані";if(""==t||""==n||""==r||""==o)throw"Заповніть всі поля";const l="Bearer "+localStorage.getItem("token"),c=await s(i+"/trips/",{start:t,end:n,passengers:r,time:o,description:a},{authorization:l});if(200===c.status)return c;throw c.message},getRides:async(t,s,r,o)=>{let l={};if(e.exports.isLoggedIn()){let e="Bearer "+localStorage.getItem("token");l={authorization:e}}let c=a({start:t,end:s,passengers:r,time:o});const u=await n(i+"/trips/"+c,{},l);if(200===u.status)return u.trips;throw u.message},getTrip:async t=>{let s={};if(e.exports.isLoggedIn()){let e="Bearer "+localStorage.getItem("token");s={authorization:e}}const r=await n(i+"/trips/"+t,{},s);if(200===r.status)return r.trip;throw r.message},getPassengerTrips:async()=>{if(!e.exports.isLoggedIn())throw"Ви не авторизовані";const t="Bearer "+localStorage.getItem("token"),s=await n(i+"/reservations/passenger",{},{authorization:t});if(200===s.status)return s.reservations;throw s.message},getDriverTrips:async()=>{if(!e.exports.isLoggedIn())throw"Ви не авторизовані";const t="Bearer "+localStorage.getItem("token"),s=await n(i+"/reservations/driver",{},{authorization:t});if(200===s.status)return s.reservations;throw s.message},isTripReserved:async t=>{if(!e.exports.isLoggedIn())return!1;const s=await e.exports.getPassengerTrips();console.log(`isTripReserved(${t}):`,s);for(let e of s)if(e.trip_id==t)return!0;return!1},reserveTrip:async(t,n)=>{if(!e.exports.isLoggedIn())throw"Ви не авторизовані";const r="Bearer "+localStorage.getItem("token"),o=await s(i+"/reservations/",{tripId:t,comment:n},{authorization:r});if(200===o.status)return o;throw o.message},getOwnTrips:async()=>{if(!e.exports.isLoggedIn())throw"Ви не авторизовані";const t=e.exports.getCurrentUser(),s="Bearer "+localStorage.getItem("token"),r=await n(i+"/trips/?driver_id="+t.id,{},{authorization:s});if(200===r.status)return r.trips;throw r.message},respondToReservation:async(t,n,r)=>{if(!e.exports.isLoggedIn())throw"Ви не авторизовані";const o="Bearer "+localStorage.getItem("token"),a=await s(i+"/reservations/respond/"+t,{response:n,comment:r},{authorization:o});if(200===a.status)return a;throw a.message},adminGetComments:async()=>{if(!e.exports.isLoggedIn())throw"Ви не авторизовані";const t="Bearer "+localStorage.getItem("token"),s=await n(i+"/admin/ratings/",{},{authorization:t});if(200===s.status)return s.ratings;throw s.message},adminDeleteComment:async t=>{if(!e.exports.isLoggedIn())throw"Ви не авторизовані";const s="Bearer "+localStorage.getItem("token"),n=await r(i+"/admin/ratings/"+t,{},{authorization:s});if(200===n.status)return n;throw n.message},adminGetUsers:async()=>{if(!e.exports.isLoggedIn())throw"Ви не авторизовані";const t="Bearer "+localStorage.getItem("token"),s=await n(i+"/admin/users/",{},{authorization:t});if(200===s.status)return s.users;throw s.message},adminDeleteUser:async t=>{if(!e.exports.isLoggedIn())throw"Ви не авторизовані";const s="Bearer "+localStorage.getItem("token"),n=await r(i+"/admin/users/"+t,{},{authorization:s});if(200===n.status)return n;throw n.message},adminMakeAdminUser:async(t,s)=>{if(!e.exports.isLoggedIn())throw"Ви не авторизовані";const n="Bearer "+localStorage.getItem("token"),r=await o(i+"/admin/users/"+t,{is_admin:s},{authorization:n});if(200===r.status)return r;throw r.message},adminGetTrips:async()=>{if(!e.exports.isLoggedIn())throw"Ви не авторизовані";const t="Bearer "+localStorage.getItem("token"),s=await n(i+"/admin/trips/",{},{authorization:t});if(200===s.status)return s.trips;throw s.message},adminDeleteTrip:async t=>{if(!e.exports.isLoggedIn())throw"Ви не авторизовані";const s="Bearer "+localStorage.getItem("token"),n=await r(i+"/admin/trips/"+t,{},{authorization:s});if(200===n.status)return n;throw n.message},adminGetReservations:async()=>{if(!e.exports.isLoggedIn())throw"Ви не авторизовані";const t="Bearer "+localStorage.getItem("token"),s=await n(i+"/admin/reservations/",{},{authorization:t});if(200===s.status)return s.reservations;throw s.message},adminDeleteReservation:async t=>{if(!e.exports.isLoggedIn())throw"Ви не авторизовані";const s="Bearer "+localStorage.getItem("token"),n=await r(i+"/admin/reservations/"+t,{},{authorization:s});if(200===n.status)return n;throw n.message}}},2316:function(e,t,s){"use strict";var n=s(9242),r=s(2483),o=s(3396),a=s(7139);const i={class:"container"},l={class:"p-3"},c={class:"container"},u={class:"d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start"},d=(0,o._)("h1",{class:"fs-4"}," BlaBlaCar ",-1),m={class:"nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0 mx-4"},h={key:0,class:"text-end"},g={class:"dropdown"},p={class:"btn btn-secondary dropdown-toggle",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},w={class:"dropdown-menu","aria-labelledby":"dropdownMenuLink"},_={key:1,class:"text-end"},f=(0,o._)("button",{type:"button",class:"btn btn-outline-light me-2"},"Вхід / Реєстрація",-1),b={class:"text-bg-dark"},v={class:"container py-4"},k={class:"d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top"},y={class:"col-md-4 d-flex align-items-center"},D=(0,o._)("a",{href:"/",class:"mb-3 me-2 mb-md-0 text-muted text-decoration-none lh-1"},[(0,o._)("svg",{class:"bi",width:"30",height:"24"},[(0,o._)("use",{"xlink:href":"#bootstrap"})])],-1),U={class:"mb-3 mb-md-0 text-muted"};function x(e,t,s,n,r,x){const z=(0,o.up)("router-link"),C=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",i,[(0,o._)("header",l,[(0,o._)("div",c,[(0,o._)("div",u,[(0,o.Wm)(z,{to:"/",class:"d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none"},{default:(0,o.w5)((()=>[d])),_:1}),(0,o._)("ul",m,[(0,o._)("li",null,[(0,o.Wm)(z,{to:"/",class:"nav-link px-2 text-white"},{default:(0,o.w5)((()=>[(0,o.Uk)("Головна")])),_:1})]),(0,o._)("li",null,[(0,o.Wm)(z,{to:"/rides",class:"nav-link px-2 text-white"},{default:(0,o.w5)((()=>[(0,o.Uk)("Поїздки")])),_:1})]),(0,o._)("li",null,[(0,o.Wm)(z,{to:"/create",class:"nav-link px-2 text-white"},{default:(0,o.w5)((()=>[(0,o.Uk)("Створити поїздку")])),_:1})])]),e.account?((0,o.wg)(),(0,o.iD)("div",h,[(0,o._)("div",g,[(0,o._)("a",p,(0,a.zw)(e.account.name),1),(0,o._)("div",w,[(0,o.Wm)(z,{class:"dropdown-item",to:"/profile"},{default:(0,o.w5)((()=>[(0,o.Uk)("Профіль")])),_:1}),(0,o.Wm)(z,{class:"dropdown-item",to:"/reservations"},{default:(0,o.w5)((()=>[(0,o.Uk)("Бронювання та поїздки")])),_:1}),e.account.admin?((0,o.wg)(),(0,o.j4)(z,{key:0,class:"dropdown-item",to:"/admin"},{default:(0,o.w5)((()=>[(0,o.Uk)("Панель керування")])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(z,{class:"dropdown-item",to:"/",onClick:t[0]||(t[0]=e=>x.logout())},{default:(0,o.w5)((()=>[(0,o.Uk)("Вийти")])),_:1})])])])):(0,o.kq)("",!0),e.account?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",_,[(0,o.Wm)(z,{to:"/login",class:"text-decoration-none"},{default:(0,o.w5)((()=>[f])),_:1})]))])])])]),(0,o._)("main",b,[(0,o._)("div",v,[(0,o.Wm)(C)])]),(0,o._)("footer",k,[(0,o._)("div",y,[D,(0,o._)("span",U,"© "+(0,a.zw)((new Date).getFullYear())+" BlaBlaCar",1)])])],64)}const z=s(9030);var C={name:"App",data:()=>({account:null}),created(){this.$watch((()=>this.$route.params),(()=>{this.loadProfile()}),{immediate:!0})},methods:{logout(){z.logout(),this.account=null},loadProfile(){if(!this.account){const e=localStorage.getItem("user");e&&(this.account=JSON.parse(e),z.checkPerms().then((e=>{this.account.admin=e})).catch((()=>{this.account.admin=!1})))}}}},R=s(89);const I=(0,R.Z)(C,[["render",x]]);var S=I;const T=(0,o._)("h1",null,"Шукаєте як зекономити на таксі?",-1),P=(0,o._)("p",null," Знайдіть собі попутника або водія, щоб подорожувати разом та економити. ",-1);function L(e,t,s,n,r,a){const i=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",null,[T,P,(0,o._)("p",null,[(0,o.Wm)(i,{to:"/rides"},{default:(0,o.w5)((()=>[(0,o.Uk)("Перейти до пошуку")])),_:1})])])}var $={name:"HomePage"};const W=(0,R.Z)($,[["render",L]]);var B=W;const N=e=>((0,o.dD)("data-v-449a0391"),e=e(),(0,o.Cn)(),e),q={key:0,class:"login-form",id:"login-form"},O=N((()=>(0,o._)("h2",null,"Вхід",-1))),A={key:0,class:"alert alert-dark",role:"alert"},H={class:"form-floating"},V=N((()=>(0,o._)("label",{for:"floatingInput"},"Логін",-1))),K={class:"form-floating"},Z=N((()=>(0,o._)("label",{for:"floatingPassword"},"Пароль",-1))),Y={class:"mb-2"},E={key:1,class:"login-form",id:"register-form"},F=N((()=>(0,o._)("h2",null,"Реєстрація",-1))),j={key:0,class:"alert alert-dark",role:"alert"},G={class:"form-floating"},J=N((()=>(0,o._)("label",{for:"floatingInput"},"Ім'я",-1))),M={class:"form-floating"},Q=N((()=>(0,o._)("label",{for:"floatingLogin"},"Логін",-1))),X={class:"form-floating"},ee=N((()=>(0,o._)("label",{for:"floatingPassword"},"Пароль",-1))),te={class:"mb-2"};function se(e,t,s,r,i,l){return(0,o.wg)(),(0,o.iD)(o.HY,null,["login"==e.mode?((0,o.wg)(),(0,o.iD)("form",q,[O,e.error?((0,o.wg)(),(0,o.iD)("div",A,(0,a.zw)(e.error),1)):(0,o.kq)("",!0),(0,o._)("div",H,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"Login",name:"login",required:"",minlength:"3","onUpdate:modelValue":t[0]||(t[0]=t=>e.login=t)},null,512),[[n.nr,e.login]]),V]),(0,o._)("div",K,[(0,o.wy)((0,o._)("input",{type:"password",class:"form-control",id:"floatingPassword",placeholder:"Password",name:"password",required:"",minlength:"8","onUpdate:modelValue":t[1]||(t[1]=t=>e.password=t)},null,512),[[n.nr,e.password]]),Z]),(0,o._)("button",{class:"w-100 btn btn-lg btn-primary my-4",type:"submit",onClick:t[2]||(t[2]=e=>l.tryLogin(e))},"Увійти"),(0,o._)("p",Y,[(0,o._)("a",{href:"#",onClick:t[3]||(t[3]=t=>e.mode="register")},"Зареєструватися")])])):(0,o.kq)("",!0),"register"==e.mode?((0,o.wg)(),(0,o.iD)("form",E,[F,e.error?((0,o.wg)(),(0,o.iD)("div",j,(0,a.zw)(e.error),1)):(0,o.kq)("",!0),(0,o._)("div",G,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"Ім'я",name:"name",required:"",minlength:"3","onUpdate:modelValue":t[4]||(t[4]=t=>e.name=t)},null,512),[[n.nr,e.name]]),J]),(0,o._)("div",M,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"floatingLogin",placeholder:"Логін",name:"login",required:"",minlength:"3","onUpdate:modelValue":t[5]||(t[5]=t=>e.login=t)},null,512),[[n.nr,e.login]]),Q]),(0,o._)("div",X,[(0,o.wy)((0,o._)("input",{type:"password",class:"form-control",id:"floatingPassword",placeholder:"Пароль",name:"password",minlength:"8",required:"","onUpdate:modelValue":t[6]||(t[6]=t=>e.password=t)},null,512),[[n.nr,e.password]]),ee]),(0,o._)("button",{class:"w-100 btn btn-lg btn-primary my-4",type:"submit",onClick:t[7]||(t[7]=e=>l.tryRegister(e))},"Зареєструватись"),(0,o._)("p",te,[(0,o._)("a",{href:"#",onClick:t[8]||(t[8]=t=>e.mode="login")},"Увійти")])])):(0,o.kq)("",!0)],64)}s(7658);const ne=s(9030);var re={name:"LoginPage",data:()=>({mode:"login",name:"",login:"",password:"",error:null}),created(){this.$watch((()=>this.$route.params),(()=>{ne.isLoggedIn()&&this.$router.push("/")}),{immediate:!0})},methods:{tryLogin:async function(e){e.preventDefault();try{await ne.login(this.login,this.password),this.$router.push("/")}catch(t){this.error=t}},tryRegister:async function(e){e.preventDefault();try{await ne.register(this.name,this.login,this.password),this.$router.push("/")}catch(t){this.error=t}}}};const oe=(0,R.Z)(re,[["render",se],["__scopeId","data-v-449a0391"]]);var ae=oe;const ie={key:0},le={key:0},ce={key:1,class:"row g-3",ref:"nameEditForm"},ue={class:"col-auto"},de=(0,o._)("label",{for:"editedName",class:"visually-hidden"},"Ім'я",-1),me={class:"col-auto"},he={class:"col-auto"},ge={key:2},pe=(0,o._)("h4",null,"Залишити відгук:",-1),we={class:"mb-1"},_e=(0,o._)("span",null,"Оцінка: ",-1),fe={class:"mb-3"},be=(0,o._)("label",{for:"editedComment",class:"form-label"},"Коментар:",-1),ve=(0,o._)("h3",null,"Відгуки:",-1),ke={class:"list-group list-group-flush"},ye={key:0,class:"list-group-item"},De={key:1},Ue={key:2},xe=(0,o._)("p",null,"Завантаження...",-1),ze=[xe];function Ce(e,t,s,r,i,l){const c=(0,o.up)("StarRating"),u=(0,o.up)("router-link");return e.account?((0,o.wg)(),(0,o.iD)("div",ie,[e.editingName?((0,o.wg)(),(0,o.iD)("form",ce,[(0,o._)("div",ue,[de,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"editedName",placeholder:"Ім'я","onUpdate:modelValue":t[1]||(t[1]=t=>e.editedName=t),required:"",minlength:"3"},null,512),[[n.nr,e.editedName]])]),(0,o._)("div",me,[(0,o._)("button",{type:"submit",class:"btn btn-primary mb-3",onClick:t[2]||(t[2]=e=>l.editName(e,this.$refs.nameEditForm))},"Зберегти")]),(0,o._)("div",he,[(0,o._)("button",{type:"submit",class:"btn btn-secondary mb-3",onClick:t[3]||(t[3]=t=>{t.preventDefault(),e.editingName=!1})},"Скасувати")])],512)):((0,o.wg)(),(0,o.iD)("h2",le,[(0,o.Uk)((0,a.zw)(e.account.name)+" ",1),e.ownAccount?((0,o.wg)(),(0,o.iD)("a",{key:0,href:"#",style:{"font-size":"small"},onClick:t[0]||(t[0]=t=>{t.preventDefault(),e.editingName=!0})},"Змінити")):(0,o.kq)("",!0)])),(0,o._)("p",null,"Дата реєстрації: "+(0,a.zw)(e.account.created_at),1),(0,o._)("p",null,[(0,o.Uk)(" Оцінка: "),(0,o.Wm)(c,{rating:e.account.average},null,8,["rating"]),(0,o.Uk)(" ("+(0,a.zw)(Math.round(100*e.account.average)/100)+") ",1)]),e.showPrompt?((0,o.wg)(),(0,o.iD)("div",ge,[pe,(0,o._)("div",we,[_e,(0,o.Wm)(c,{readonly:!1,rating:e.editedComment.rating,"onUpdate:rating":l.updateRating},null,8,["rating","onUpdate:rating"])]),(0,o._)("div",fe,[be,(0,o.wy)((0,o._)("textarea",{class:"form-control",id:"editedComment",rows:"3","onUpdate:modelValue":t[4]||(t[4]=t=>e.editedComment.comment=t)},null,512),[[n.nr,e.editedComment.comment]])]),(0,o._)("div",null,[(0,o._)("button",{class:"btn btn-sm btn-primary",onClick:t[5]||(t[5]=e=>l.sendRating())},"Залишити")])])):(0,o.kq)("",!0),ve,(0,o._)("ul",ke,[0==e.account.comments.length?((0,o.wg)(),(0,o.iD)("li",ye,"Порожньо")):((0,o.wg)(!0),(0,o.iD)(o.HY,{key:1},(0,o.Ko)(e.account.comments,(e=>((0,o.wg)(),(0,o.iD)("li",{class:"list-group-item",key:e.id},[(0,o._)("span",null,[(0,o.Wm)(u,{to:"/profile/"+e.creator_id},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.creator_name),1)])),_:2},1032,["to"]),(0,o.Uk)(" - "+(0,a.zw)(e.time),1)]),(0,o._)("p",null,[(0,o.Wm)(c,{rating:e.rating},null,8,["rating"]),(0,o.Uk)(" "+(0,a.zw)(e.comment),1)])])))),128))])])):e.error?((0,o.wg)(),(0,o.iD)("div",De,[(0,o._)("p",null,(0,a.zw)(e.error),1)])):((0,o.wg)(),(0,o.iD)("div",Ue,ze))}const Re=["onClick"];function Ie(e,t,s,n,r,i){return(0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)(5,((e,t)=>(0,o._)("span",{key:t,class:(0,a.C_)("fa fa-star"+(s.rating>=t+1?" checked":"")),onClick:e=>!s.readonly&&i.updateRating(t+1)},null,10,Re))),64)}var Se={name:"StarRating",props:{rating:{type:Number,required:!0},readonly:{type:Boolean,default:!0}},methods:{updateRating(e){this.$emit("update:rating",e)}}};const Te=(0,R.Z)(Se,[["render",Ie],["__scopeId","data-v-80c051ee"]]);var Pe=Te;const Le=s(9030);var $e={name:"ProfilePage",data:()=>({account:null,error:null,showPrompt:!1,ownAccount:!1,editedComment:{rating:0,comment:""},editingName:!1,editedName:""}),created(){this.$watch((()=>this.$route.params),(()=>{this.loadProfile()}),{immediate:!0})},methods:{loadProfile(){const e=Le.isLoggedIn()?Le.getCurrentUser().id:null;this.showPrompt=!1,this.editingName=!1,this.ownAccount=!1,!e||this.$route.params.id&&this.$route.params.id!=e||(this.ownAccount=!0,this.editedName=Le.getCurrentUser().name),this.$route.params.id?Le.getProfile(this.$route.params.id).then((t=>{this.account=t,this.account.id=this.$route.params.id,Le.isLoggedIn()&&this.account.id!=e&&(this.showPrompt=!0)})).catch((e=>{this.error=e})):Le.getProfile().then((t=>{this.account=t,this.account.id=e,this.ownAccount=!0,this.editedName=this.account.name})).catch((e=>{this.error=e}))},updateRating(e){this.editedComment.rating=e},sendRating(){0!=this.editedComment.rating&&Le.postComment(this.account.id,this.editedComment).then((()=>{this.editedComment={rating:0,comment:""},this.showPrompt=!1,this.error=null,this.account=null,this.loadProfile()})).catch((e=>{console.log(e),this.error=e.message}))},editName(e,t){e.preventDefault(),t.checkValidity()?Le.editName(this.editedName).then((()=>{this.account.name=this.editedName,this.editingName=!1,location.reload()})).catch((e=>{console.log(e),this.error=e.message})):t.reportValidity()}},components:{StarRating:Pe}};const We=(0,R.Z)($e,[["render",Ce]]);var Be=We;const Ne=(0,o._)("h1",null,"Створити поїздку",-1),qe={ref:"createRideForm"},Oe={class:"mb-3 row"},Ae=(0,o._)("label",{class:"col-sm-2 col-form-label"},"Звідки",-1),He={class:"col-sm-10"},Ve={class:"mb-3 row"},Ke=(0,o._)("label",{class:"col-sm-2 col-form-label"},"Куди",-1),Ze={class:"col-sm-10"},Ye={class:"mb-3 row"},Ee=(0,o._)("label",{class:"col-sm-2 col-form-label"},"Кількість пасажирів",-1),Fe={class:"col-sm-10"},je={class:"mb-3 row"},Ge=(0,o._)("label",{class:"col-sm-2 col-form-label"},"Дата/час",-1),Je={class:"col-sm-10"},Me={class:"mb-3"},Qe=(0,o._)("label",{class:"form-label"},"Опис (авто, умови, місце зустрічі)",-1),Xe=["disabled"];function et(e,t,s,r,a,i){const l=(0,o.up)("AddressSearchBox");return(0,o.wg)(),(0,o.iD)(o.HY,null,[Ne,(0,o._)("form",qe,[(0,o._)("div",Oe,[Ae,(0,o._)("div",He,[(0,o.Wm)(l,{placeholder:"Звідки",onChanged:i.changeFrom},null,8,["onChanged"])])]),(0,o._)("div",Ve,[Ke,(0,o._)("div",Ze,[(0,o.Wm)(l,{placeholder:"Куди",onChanged:i.changeTo},null,8,["onChanged"])])]),(0,o._)("div",Ye,[Ee,(0,o._)("div",Fe,[(0,o.wy)((0,o._)("input",{type:"number",class:"form-control",placeholder:"Кількість пасажирів","onUpdate:modelValue":t[0]||(t[0]=t=>e.count=t),required:"",min:"1"},null,512),[[n.nr,e.count]])])]),(0,o._)("div",je,[Ge,(0,o._)("div",Je,[(0,o.wy)((0,o._)("input",{type:"datetime-local",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=t=>e.date=t),required:""},null,512),[[n.nr,e.date]])])]),(0,o._)("div",Me,[Qe,(0,o.wy)((0,o._)("textarea",{class:"form-control",rows:"3","onUpdate:modelValue":t[2]||(t[2]=t=>e.description=t)},null,512),[[n.nr,e.description]])]),(0,o._)("button",{class:"btn btn-primary",disabled:e.buttonDisabled,onClick:t[3]||(t[3]=t=>i.submitRide(t,e.$refs.createRideForm))},"Опублікувати",8,Xe)],512)],64)}const tt=["placeholder"],st=["onClick"];function nt(e,t,s,r,i,l){return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.searchTerm=e),onInput:t[1]||(t[1]=(...e)=>l.search&&l.search(...e)),placeholder:s.placeholder,class:"form-control",onFocus:t[2]||(t[2]=(...e)=>l.showResults&&l.showResults(...e))},null,40,tt),[[n.nr,i.searchTerm]]),(0,o._)("div",{class:(0,a.C_)("dropdown-menu mt-0"+(i.showDropdown&&i.searchResults.length>0?" d-block":" d-none"))},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.searchResults,(e=>((0,o.wg)(),(0,o.iD)("li",{class:"dropdown-item",key:e.id,onClick:t=>l.selectResult(e,t)},(0,a.zw)(e.name),9,st)))),128))],2)],64)}const rt=s(9030);var ot={name:"AddressSearchBox",data(){return{searchTerm:"",searchResults:[],showDropdown:!1,timeout:null}},props:{placeholder:{type:String,default:"Search..."}},methods:{search(){if(0==this.searchTerm.length)return this.searchResults=[],void this.$emit("deleted","");this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((()=>{this.searchResults=[],this.searchTerm.length>0&&this.getSearchResults()}),500)},getSearchResults(){rt.getHints(this.searchTerm).then((e=>{for(let t=0;t<e.length;t++)this.searchResults.push({id:t,name:e[t]})}))},selectResult(e,t){t.stopPropagation(),this.searchTerm=e.name,this.searchResults=[],this.$emit("changed",e.name)},showResults(){this.showDropdown=!0},hideResults(){this.showDropdown=!1}}};const at=(0,R.Z)(ot,[["render",nt]]);var it=at;const lt=s(9030);var ct={name:"CreateRidePage",components:{AddressSearchBox:it},data:()=>({from:null,to:null,count:1,date:(new Date).toISOString().slice(0,16),description:"",buttonDisabled:!0}),created(){this.$watch((()=>this.$route.params),(()=>{lt.isLoggedIn()||this.$router.push("/login")}),{immediate:!0})},methods:{changeFrom(e){this.from=e,this.buttonDisabled=!this.from||!this.to},changeTo(e){this.to=e,this.buttonDisabled=!this.from||!this.to},submitRide(e,t){if(e.preventDefault(),t.checkValidity()){var s=new Date(this.date).getTime()/1e3;this.from&&this.to&&lt.createRide(this.from,this.to,this.count,s,this.description).then((()=>{this.$router.push("/reservations")})).catch((e=>{console.error(e),alert(e)}))}else t.reportValidity()}}};const ut=(0,R.Z)(ct,[["render",et]]);var dt=ut;const mt=(0,o._)("h1",null,"Пошук поїздки",-1),ht={ref:"createRideForm"},gt={class:"mb-3 row"},pt=(0,o._)("label",{class:"col-sm-2 col-form-label"},"Звідки",-1),wt={class:"col-sm-10"},_t={class:"mb-3 row"},ft=(0,o._)("label",{class:"col-sm-2 col-form-label"},"Куди",-1),bt={class:"col-sm-10"},vt={class:"mb-3 row"},kt=(0,o._)("label",{class:"col-sm-2 col-form-label"},"Кількість пасажирів",-1),yt={class:"col-sm-10"},Dt={class:"mb-3 row"},Ut=(0,o._)("label",{class:"col-sm-2 col-form-label"},"Виїзд до",-1),xt={class:"col-sm-10"},zt=(0,o._)("hr",null,null,-1),Ct={key:0},Rt=(0,o._)("p",null,"Завантаження...",-1),It=[Rt],St={key:1},Tt={key:2},Pt=(0,o._)("p",null,"Нічого не знайдено",-1),Lt=[Pt],$t={key:3},Wt={class:"list-group list-group-flush"},Bt={class:"h5"},Nt={class:"mb-2"},qt=(0,o._)("br",null,null,-1),Ot=(0,o._)("b",null,"Звідки:",-1),At=(0,o._)("br",null,null,-1),Ht=(0,o._)("b",null,"Куди:",-1),Vt=(0,o._)("button",{type:"button",class:"btn btn-success"}," Детальніше » ",-1);function Kt(e,t,s,r,i,l){const c=(0,o.up)("AddressSearchBox"),u=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)(o.HY,null,[mt,(0,o._)("form",ht,[(0,o._)("div",gt,[pt,(0,o._)("div",wt,[(0,o.Wm)(c,{placeholder:"Звідки",onChanged:l.changeFrom,onDeleted:l.removeFrom},null,8,["onChanged","onDeleted"])])]),(0,o._)("div",_t,[ft,(0,o._)("div",bt,[(0,o.Wm)(c,{placeholder:"Куди",onChanged:l.changeTo,onDeleted:l.removeTo},null,8,["onChanged","onDeleted"])])]),(0,o._)("div",vt,[kt,(0,o._)("div",yt,[(0,o.wy)((0,o._)("input",{type:"number",class:"form-control",placeholder:"Кількість пасажирів","onUpdate:modelValue":t[0]||(t[0]=t=>e.count=t),min:"1"},null,512),[[n.nr,e.count]])])]),(0,o._)("div",Dt,[Ut,(0,o._)("div",xt,[(0,o.wy)((0,o._)("input",{type:"datetime-local",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=t=>e.date=t)},null,512),[[n.nr,e.date]])])]),(0,o._)("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=t=>l.searchRide(t,e.$refs.createRideForm))},"Пошук")],512),zt,e.loading?((0,o.wg)(),(0,o.iD)("div",Ct,It)):e.error?((0,o.wg)(),(0,o.iD)("div",St,[(0,o._)("p",null,"Помилка: "+(0,a.zw)(e.error),1)])):0===e.trips.length?((0,o.wg)(),(0,o.iD)("div",Tt,Lt)):((0,o.wg)(),(0,o.iD)("div",$t,[(0,o._)("ul",Wt,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.trips,(e=>((0,o.wg)(),(0,o.iD)("li",{class:"list-group-item",key:e.id},[(0,o._)("span",Bt,[(0,o.Wm)(u,{to:"/profile/"+e.driver_id},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.driver_name),1)])),_:2},1032,["to"]),(0,o.Uk)(" - "+(0,a.zw)(new Date(1e3*e.time).toLocaleString("uk-UA",{timeZone:"Europe/Kiev"})),1)]),(0,o._)("div",Nt,[(0,o._)("b",null,(0,a.zw)(e.passengers)+" "+(0,a.zw)(l.countParse(e.passengers)),1),qt,(0,o._)("span",null,[Ot,(0,o.Uk)(" "+(0,a.zw)(e.start),1)]),At,(0,o._)("span",null,[Ht,(0,o.Uk)(" "+(0,a.zw)(e.end),1)])]),(0,o._)("span",null,[(0,o.Wm)(u,{to:"/rides/"+e.id},{default:(0,o.w5)((()=>[Vt])),_:2},1032,["to"])])])))),128))])]))],64)}const Zt=s(9030);var Yt={name:"SearchRidePage",components:{AddressSearchBox:it},data:()=>({from:null,to:null,count:1,date:(new Date).toISOString().slice(0,16),trips:[],error:null,loading:!1}),created(){this.$watch((()=>this.$route.params),(()=>{this.loadTrips()}),{immediate:!0})},methods:{changeFrom(e){this.from=e},changeTo(e){this.to=e},removeFrom(){this.from=null},removeTo(){this.to=null},loadTrips(){if(!this.trips.length){this.loading=!0,this.error=null;var e=new Date(this.date).getTime()/1e3;Zt.getRides(this.from,this.to,this.count,e).then((e=>{this.trips=e,this.loading=!1})).catch((e=>{this.error=e,this.loading=!1}))}},searchRide(e,t){e.preventDefault(),t.checkValidity()?(this.trips=[],this.loadTrips()):t.reportValidity()},countParse(e){return e%10===1&&e%100!==11?"місце":e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?"місця":"місць"}}};const Et=(0,R.Z)(Yt,[["render",Kt]]);var Ft=Et;const jt={key:0},Gt=(0,o._)("h1",null,"Деталі про поїздку",-1),Jt=(0,o._)("b",null,"Відправлення:",-1),Mt=(0,o._)("br",null,null,-1),Qt=(0,o._)("b",null,"Прибуття:",-1),Xt=(0,o._)("br",null,null,-1),es=(0,o._)("b",null,"Кількість пасажирів:",-1),ts=(0,o._)("br",null,null,-1),ss=(0,o._)("b",null,"Дата відправлення:",-1),ns=(0,o._)("br",null,null,-1),rs=(0,o._)("b",null,"Водій:",-1),os=(0,o._)("br",null,null,-1),as=(0,o._)("b",null,"Опис:",-1),is={key:0},ls=(0,o._)("hr",null,null,-1),cs=(0,o._)("h3",null,"Забронювати?",-1),us={class:"mb-3"},ds=(0,o._)("label",{class:"form-label"},"Повідомлення водію (контакти, які речі, наявність дітей)",-1),ms={key:1},hs=(0,o._)("hr",null,null,-1),gs=(0,o._)("h4",null,"Ви вже забронювали цю поїздку",-1),ps={key:0},ws={key:0,class:"text-success"},_s={key:1,class:"text-danger"},fs=(0,o._)("br",null,null,-1),bs={key:1},vs=(0,o._)("span",{class:"text-warning"},"Очікується відповідь",-1),ks=[vs],ys={key:2},Ds=(0,o._)("hr",null,null,-1),Us=(0,o._)("h4",null,"Резервування на вашу поїздку:",-1),xs={key:0},zs={class:"list-group list-group-flush"},Cs={class:"h6"},Rs={key:0},Is=(0,o._)("label",{class:"form-label"},"Відповідь:",-1),Ss=["onUpdate:modelValue"],Ts=["onClick"],Ps=["onClick"],Ls={key:1},$s={key:0,class:"text-success"},Ws={key:1,class:"text-danger"},Bs=(0,o._)("br",null,null,-1),Ns={key:1},qs=(0,o._)("p",null,"Немає резервувань",-1),Os=[qs],As={key:1},Hs={key:2},Vs=(0,o._)("p",null,"Завантаження...",-1),Ks=[Vs];function Zs(e,t,s,r,i,l){const c=(0,o.up)("router-link");return e.trip?((0,o.wg)(),(0,o.iD)("div",jt,[Gt,(0,o._)("p",null,[Jt,(0,o.Uk)(" "+(0,a.zw)(e.trip.start),1),Mt,Qt,(0,o.Uk)(" "+(0,a.zw)(e.trip.end),1),Xt,es,(0,o.Uk)(" "+(0,a.zw)(e.trip.passengers),1),ts,ss,(0,o.Uk)(" "+(0,a.zw)(new Date(1e3*e.trip.time).toLocaleString("uk-UA",{timeZone:"Europe/Kiev"})),1),ns,rs,(0,o.Uk)(),(0,o.Wm)(c,{to:"/profile/"+e.trip.driver_id},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.trip.driver_name),1)])),_:1},8,["to"]),os,as,(0,o.Uk)(" "+(0,a.zw)(e.trip.description),1)]),e.canReserve?((0,o.wg)(),(0,o.iD)("div",is,[ls,cs,(0,o._)("div",us,[ds,(0,o.wy)((0,o._)("textarea",{class:"form-control",rows:"3","onUpdate:modelValue":t[0]||(t[0]=t=>e.description=t)},null,512),[[n.nr,e.description]])]),(0,o._)("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>l.reserve&&l.reserve(...e))},"Забронювати")])):(0,o.kq)("",!0),e.myReservation&&e.alreadyReserved?((0,o.wg)(),(0,o.iD)("div",ms,[hs,gs,e.myReservation.status?((0,o.wg)(),(0,o.iD)("div",ps,[1==e.myReservation.status?((0,o.wg)(),(0,o.iD)("span",ws,"Прийнято")):(0,o.kq)("",!0),2==e.myReservation.status?((0,o.wg)(),(0,o.iD)("span",_s,"Відхилено")):(0,o.kq)("",!0),(0,o.Uk)(" - "),(0,o._)("span",null,(0,a.zw)(new Date(e.myReservation.response_time).toLocaleString("uk-UA",{timeZone:"Europe/Kiev"})),1),fs,(0,o._)("span",null,(0,a.zw)(e.myReservation.response),1)])):((0,o.wg)(),(0,o.iD)("div",bs,ks))])):(0,o.kq)("",!0),e.showReservations?((0,o.wg)(),(0,o.iD)("div",ys,[Ds,Us,e.reservations.length?((0,o.wg)(),(0,o.iD)("div",xs,[(0,o._)("ul",zs,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.reservations,(t=>((0,o.wg)(),(0,o.iD)("li",{class:"list-group-item",key:t.id},[(0,o._)("span",Cs,[(0,o.Wm)(c,{to:"/profile/"+t.user_id},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(t.user_name),1)])),_:2},1032,["to"]),(0,o.Uk)(" - "+(0,a.zw)(t.time),1)]),(0,o._)("p",null,(0,a.zw)(t.comment),1),e.alreadyReserved||t.status?t.status?((0,o.wg)(),(0,o.iD)("div",Ls,[1==t.status?((0,o.wg)(),(0,o.iD)("span",$s,"Прийнято")):(0,o.kq)("",!0),2==t.status?((0,o.wg)(),(0,o.iD)("span",Ws,"Відхилено")):(0,o.kq)("",!0),(0,o.Uk)(" - "),(0,o._)("span",null,(0,a.zw)(new Date(t.response_time).toLocaleString("uk-UA",{timeZone:"Europe/Kiev"})),1),Bs,(0,o._)("span",null,(0,a.zw)(t.response),1)])):(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",Rs,[Is,(0,o.wy)((0,o._)("textarea",{class:"form-control mb-3",rows:"3","onUpdate:modelValue":e=>t.response=e},null,8,Ss),[[n.nr,t.response]]),(0,o._)("button",{class:"btn btn-success",onClick:e=>l.acceptReservation(t)},"Прийняти",8,Ts),(0,o._)("button",{class:"btn btn-danger mx-2",onClick:e=>l.rejectReservation(t)},"Відхилити",8,Ps)]))])))),128))])])):((0,o.wg)(),(0,o.iD)("div",Ns,Os))])):(0,o.kq)("",!0)])):e.error?((0,o.wg)(),(0,o.iD)("div",As,[(0,o._)("p",null,(0,a.zw)(e.error),1)])):((0,o.wg)(),(0,o.iD)("div",Hs,Ks))}const Ys=s(9030);var Es={name:"RidePage",data:()=>({trip:null,error:null,canReserve:!1,description:"",alreadyReserved:!1,showReservations:!1,reservations:[],myReservation:null}),created(){this.$watch((()=>this.$route.params),(()=>{this.loadTrip()}),{immediate:!0})},methods:{loadTrip(){this.error=null,this.canReserve=!1,Ys.getTrip(this.$route.params.id).then((e=>{this.trip=e,Ys.isLoggedIn()&&(e.driver_id!==Ys.getCurrentUser().id?Ys.getPassengerTrips().then((t=>{this.myReservation=t.find((t=>t.trip_id==e.id)),this.alreadyReserved=this.myReservation,this.canReserve=!this.alreadyReserved})).catch((e=>{this.error=e})):(this.showReservations=!0,Ys.getDriverTrips(e.id).then((t=>{for(var s of(this.reservations=[],t))s.trip_id==e.id&&(this.reservations.push(s),1==s.status&&(this.alreadyReserved=!0));console.log(this.reservations,this.alreadyReserved)})).catch((e=>{this.error=e}))))})).catch((e=>{this.error=e}))},reserve(){Ys.reserveTrip(this.$route.params.id,this.description).then((()=>{location.reload()})).catch((e=>{this.error=e,alert(e)}))},acceptReservation(e){Ys.respondToReservation(e.id,1,e.response).then((()=>{location.reload()})).catch((e=>{this.error=e,alert(e)}))},rejectReservation(e){Ys.respondToReservation(e.id,2,e.response).then((()=>{location.reload()})).catch((e=>{this.error=e,alert(e)}))}}};const Fs=(0,R.Z)(Es,[["render",Zs]]);var js=Fs;const Gs=(0,o._)("hr",null,null,-1),Js={key:0},Ms={key:1},Qs=(0,o._)("p",null,"Завантаження...",-1),Xs=[Qs],en={key:2},tn={class:"list-group list-group-flush"},sn={key:0,class:"list-group-item"},nn={class:"mb-2"},rn=(0,o._)("b",null,"Звідки:",-1),on=(0,o._)("br",null,null,-1),an=(0,o._)("b",null,"Куди:",-1),ln=(0,o._)("br",null,null,-1),cn=(0,o._)("b",null,"Коли:",-1),un=(0,o._)("button",{type:"button",class:"btn btn-success"}," Детальніше » ",-1),dn={key:3},mn={class:"list-group list-group-flush"},hn={key:0,class:"list-group-item"},gn={class:"mb-2"},pn=(0,o._)("b",null,"Звідки:",-1),wn=(0,o._)("br",null,null,-1),_n=(0,o._)("b",null,"Куди:",-1),fn=(0,o._)("br",null,null,-1),bn=(0,o._)("b",null,"Коли:",-1),vn={class:"mb-2"},kn=(0,o._)("b",null,"Час бронювання:",-1),yn=(0,o._)("br",null,null,-1),Dn=(0,o._)("b",null,"Ваш коментар:",-1),Un=(0,o._)("br",null,null,-1),xn={key:0,class:"mb-2"},zn=(0,o._)("b",null,"Відповідь:",-1),Cn=(0,o._)("br",null,null,-1),Rn=(0,o._)("b",null,"Час відповіді:",-1),In=(0,o._)("br",null,null,-1),Sn=(0,o._)("b",null,"Статус відповіді:",-1),Tn={key:1,class:"mb-2"},Pn=(0,o._)("b",null,"Очікуйте на відповідь",-1),Ln=[Pn],$n=(0,o._)("button",{type:"button",class:"btn btn-success"}," Детальніше » ",-1);function Wn(e,t,s,n,r,i){const l=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=e=>i.switchPage(!1))},"Мої резервування"),(0,o._)("button",{type:"button",class:"btn btn-secondary mx-2",onClick:t[1]||(t[1]=e=>i.switchPage(!0))},"Мої поїздки"),Gs,e.error?((0,o.wg)(),(0,o.iD)("div",Js,[(0,o._)("p",null,(0,a.zw)(e.error),1)])):e.loading?((0,o.wg)(),(0,o.iD)("div",Ms,Xs)):e.showOwnTrips?((0,o.wg)(),(0,o.iD)("div",en,[(0,o._)("ul",tn,[0==e.trips.length?((0,o.wg)(),(0,o.iD)("li",sn,"Порожньо")):((0,o.wg)(!0),(0,o.iD)(o.HY,{key:1},(0,o.Ko)(e.trips,(e=>((0,o.wg)(),(0,o.iD)("li",{class:"list-group-item",key:e.id},[(0,o._)("div",nn,[(0,o._)("span",null,[rn,(0,o.Uk)(" "+(0,a.zw)(e.start),1)]),on,(0,o._)("span",null,[an,(0,o.Uk)(" "+(0,a.zw)(e.end),1)]),ln,(0,o._)("span",null,[cn,(0,o.Uk)(" "+(0,a.zw)(new Date(1e3*e.time).toLocaleString("uk-UA",{timeZone:"Europe/Kiev"})),1)])]),(0,o._)("span",null,[(0,o.Wm)(l,{to:"/rides/"+e.id},{default:(0,o.w5)((()=>[un])),_:2},1032,["to"])])])))),128))])])):((0,o.wg)(),(0,o.iD)("div",dn,[(0,o._)("ul",mn,[0==e.trips.length?((0,o.wg)(),(0,o.iD)("li",hn,"Порожньо")):((0,o.wg)(!0),(0,o.iD)(o.HY,{key:1},(0,o.Ko)(e.trips,(e=>((0,o.wg)(),(0,o.iD)("li",{class:"list-group-item",key:e.id},[(0,o._)("div",gn,[(0,o._)("span",null,[pn,(0,o.Uk)(" "+(0,a.zw)(e.start),1)]),wn,(0,o._)("span",null,[_n,(0,o.Uk)(" "+(0,a.zw)(e.end),1)]),fn,(0,o._)("span",null,[bn,(0,o.Uk)(" "+(0,a.zw)(new Date(1e3*e.trip_time).toLocaleString("uk-UA",{timeZone:"Europe/Kiev"})),1)])]),(0,o._)("div",vn,[(0,o._)("span",null,[kn,(0,o.Uk)(" "+(0,a.zw)(e.time),1)]),yn,(0,o._)("span",null,[Dn,(0,o.Uk)(" "+(0,a.zw)(e.comment),1)]),Un]),e.response_time?((0,o.wg)(),(0,o.iD)("div",xn,[(0,o._)("span",null,[zn,(0,o.Uk)(" "+(0,a.zw)(e.response),1)]),Cn,(0,o._)("span",null,[Rn,(0,o.Uk)(" "+(0,a.zw)(new Date(e.response_time).toLocaleString("uk-UA",{timeZone:"Europe/Kiev"})),1)]),In,(0,o._)("span",null,[Sn,(0,o.Uk)(" "+(0,a.zw)(1==e.status?"Погоджено":"Відхилено"),1)])])):((0,o.wg)(),(0,o.iD)("div",Tn,Ln)),(0,o._)("span",null,[(0,o.Wm)(l,{to:"/rides/"+e.trip_id},{default:(0,o.w5)((()=>[$n])),_:2},1032,["to"])])])))),128))])]))],64)}const Bn=s(9030);var Nn={name:"ReservationsPage",data:()=>({trips:[],error:null,loading:!1,showOwnTrips:!1}),created(){this.loadTrips()},methods:{loadTrips(){this.error=null,this.loading=!0,this.showOwnTrips?Bn.getOwnTrips().then((e=>{this.trips=e,this.loading=!1})).catch((e=>{this.error=e,this.loading=!1})):Bn.getPassengerTrips().then((e=>{this.trips=e,this.loading=!1})).catch((e=>{this.error=e,this.loading=!1}))},switchPage(e){this.showOwnTrips!==e&&(this.showOwnTrips=e,this.loadTrips())}}};const qn=(0,R.Z)(Nn,[["render",Wn]]);var On=qn;const An=e=>((0,o.dD)("data-v-ceb8f320"),e=e(),(0,o.Cn)(),e),Hn={class:"d-flex flex-column flex-shrink-0 p-3 text-white bg-dark",style:{width:"280px"}},Vn=An((()=>(0,o._)("a",{href:"/",class:"d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none"},[(0,o._)("span",{class:"fs-4"},"Адмін панель")],-1))),Kn=An((()=>(0,o._)("hr",null,null,-1))),Zn={class:"nav nav-pills flex-column mb-auto"},Yn=["onClick"],En={key:0},Fn={class:"table"},jn=An((()=>(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{scope:"col"},"#"),(0,o._)("th",{scope:"col"},"Автор"),(0,o._)("th",{scope:"col"},"Отримувач"),(0,o._)("th",{scope:"col"},"Оцінка"),(0,o._)("th",{scope:"col"},"Коментар"),(0,o._)("th",{scope:"col"},"Управління")])],-1))),Gn={key:0},Jn={scope:"row"},Mn=["onClick"],Qn={key:1},Xn={class:"table"},er=An((()=>(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{scope:"col"},"#"),(0,o._)("th",{scope:"col"},"Автор"),(0,o._)("th",{scope:"col"},"Звідки"),(0,o._)("th",{scope:"col"},"Куди"),(0,o._)("th",{scope:"col"},"Місць"),(0,o._)("th",{scope:"col"},"Дата створення"),(0,o._)("th",{scope:"col"},"Опис"),(0,o._)("th",{scope:"col"},"Управління")])],-1))),tr={key:0},sr={scope:"row"},nr=["onClick"],rr={key:2},or={class:"table"},ar=An((()=>(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{scope:"col"},"#"),(0,o._)("th",{scope:"col"},"Ім'я"),(0,o._)("th",{scope:"col"},"Логін"),(0,o._)("th",{scope:"col"},"Дата створення"),(0,o._)("th",{scope:"col"},"Роль"),(0,o._)("th",{scope:"col"},"Управління")])],-1))),ir={key:0},lr={scope:"row"},cr={key:0,class:"badge text-bg-success"},ur={key:1,class:"badge text-bg-secondary"},dr={key:0},mr=["onClick"],hr=["onClick"],gr=["onClick"],pr={key:1},wr={key:3},_r={class:"table"},fr=An((()=>(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{scope:"col"},"#"),(0,o._)("th",{scope:"col"},"Водій"),(0,o._)("th",{scope:"col"},"Пасажир"),(0,o._)("th",{scope:"col"},"Дата створення"),(0,o._)("th",{scope:"col"},"Коментар"),(0,o._)("th",{scope:"col"},"Статус"),(0,o._)("th",{scope:"col"},"Відповідь"),(0,o._)("th",{scope:"col"},"Час відповіді"),(0,o._)("th",{scope:"col"},"Управління")])],-1))),br={key:0},vr={scope:"row"},kr={key:0,class:"badge text-bg-secondary"},yr={key:1,class:"badge text-bg-success"},Dr={key:2,class:"badge text-bg-danger"},Ur=["onClick"];function xr(e,t,s,n,r,i){const l=(0,o.up)("router-link"),c=(0,o.up)("StarRating");return(0,o.wg)(),(0,o.iD)("main",null,[(0,o._)("div",Hn,[Vn,Kn,(0,o._)("ul",Zn,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.pages,(t=>((0,o.wg)(),(0,o.iD)("li",{class:"nav-item",key:t.page},[(0,o._)("a",{href:"#",class:(0,a.C_)("nav-link "+(e.page==t.page?"active":"text-white")),"aria-current":"page",onClick:e=>i.changePage(t.page)},(0,a.zw)(t.name),11,Yn)])))),128))])]),"comments"==e.page?((0,o.wg)(),(0,o.iD)("div",En,[(0,o._)("table",Fn,[jn,(0,o._)("tbody",null,[e.comments.length?((0,o.wg)(!0),(0,o.iD)(o.HY,{key:1},(0,o.Ko)(e.comments,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e.id},[(0,o._)("th",Jn,(0,a.zw)(e.id),1),(0,o._)("td",null,[(0,o.Wm)(l,{to:"/profile/"+e.creator_id},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.creator_name),1)])),_:2},1032,["to"])]),(0,o._)("td",null,[(0,o.Wm)(l,{to:"/profile/"+e.user_id},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.user_name),1)])),_:2},1032,["to"])]),(0,o._)("td",null,[(0,o.Wm)(c,{rating:e.rating},null,8,["rating"])]),(0,o._)("td",null,(0,a.zw)(e.comment),1),(0,o._)("td",null,[(0,o._)("button",{class:"btn btn-danger btn-sm",onClick:t=>i.deleteComment(e.id)},"Видалити",8,Mn)])])))),128)):((0,o.wg)(),(0,o.iD)("div",Gn," Порожньо "))])])])):"trips"==e.page?((0,o.wg)(),(0,o.iD)("div",Qn,[(0,o._)("table",Xn,[er,(0,o._)("tbody",null,[e.trips.length?((0,o.wg)(!0),(0,o.iD)(o.HY,{key:1},(0,o.Ko)(e.trips,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e.id},[(0,o._)("th",sr,(0,a.zw)(e.id),1),(0,o._)("td",null,[(0,o.Wm)(l,{to:"/profile/"+e.driver_id},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.driver_name),1)])),_:2},1032,["to"])]),(0,o._)("td",null,(0,a.zw)(e.start),1),(0,o._)("td",null,(0,a.zw)(e.end),1),(0,o._)("td",null,(0,a.zw)(e.passengers),1),(0,o._)("td",null,(0,a.zw)(new Date(e.time/1e3).toLocaleString("uk-UA",{timeZone:"Europe/Kiev"})),1),(0,o._)("td",null,(0,a.zw)(e.description),1),(0,o._)("td",null,[(0,o._)("button",{class:"btn btn-danger btn-sm",onClick:t=>i.deleteTrip(e.id)},"Видалити",8,nr)])])))),128)):((0,o.wg)(),(0,o.iD)("div",tr," Порожньо "))])])])):"users"==e.page?((0,o.wg)(),(0,o.iD)("div",rr,[(0,o._)("table",or,[ar,(0,o._)("tbody",null,[e.users.length?((0,o.wg)(!0),(0,o.iD)(o.HY,{key:1},(0,o.Ko)(e.users,(t=>((0,o.wg)(),(0,o.iD)("tr",{key:t.id},[(0,o._)("th",lr,(0,a.zw)(t.id),1),(0,o._)("td",null,(0,a.zw)(t.name),1),(0,o._)("td",null,(0,a.zw)(t.login),1),(0,o._)("td",null,(0,a.zw)(t.created_at),1),(0,o._)("td",null,[t.is_admin?((0,o.wg)(),(0,o.iD)("span",cr,"Адмін")):((0,o.wg)(),(0,o.iD)("span",ur,"Користувач"))]),(0,o._)("td",null,[t.id!=e.ownId?((0,o.wg)(),(0,o.iD)("div",dr,[(0,o._)("button",{class:"btn btn-danger btn-sm",onClick:e=>i.deleteUser(t.id)},"Видалити",8,mr),t.is_admin?((0,o.wg)(),(0,o.iD)("button",{key:1,class:"btn btn-secondary btn-sm mx-2",onClick:e=>i.makeAdminUser(t.id,!1)},"Забрати роль",8,gr)):((0,o.wg)(),(0,o.iD)("button",{key:0,class:"btn btn-secondary btn-sm mx-2",onClick:e=>i.makeAdminUser(t.id,!0)},"Зробити адміном",8,hr))])):((0,o.wg)(),(0,o.iD)("span",pr,"-"))])])))),128)):((0,o.wg)(),(0,o.iD)("div",ir," Порожньо "))])])])):"reservations"==e.page?((0,o.wg)(),(0,o.iD)("div",wr,[(0,o._)("table",_r,[fr,(0,o._)("tbody",null,[e.reservations.length?((0,o.wg)(!0),(0,o.iD)(o.HY,{key:1},(0,o.Ko)(e.reservations,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e.id},[(0,o._)("th",vr,(0,a.zw)(e.id),1),(0,o._)("td",null,[(0,o.Wm)(l,{to:"/profile/"+e.driver_id},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.driver_name),1)])),_:2},1032,["to"])]),(0,o._)("td",null,[(0,o.Wm)(l,{to:"/profile/"+e.user_id},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.client_name),1)])),_:2},1032,["to"])]),(0,o._)("td",null,(0,a.zw)(e.time),1),(0,o._)("td",null,(0,a.zw)(e.comment),1),(0,o._)("td",null,[0==e.status?((0,o.wg)(),(0,o.iD)("span",kr,"Очікує")):1==e.status?((0,o.wg)(),(0,o.iD)("span",yr,"Погоджено")):((0,o.wg)(),(0,o.iD)("span",Dr,"Відхилено"))]),(0,o._)("td",null,(0,a.zw)(e.response??"-"),1),(0,o._)("td",null,(0,a.zw)(e.response_time?new Date(e.response_time).toLocaleString("uk-UA",{timeZone:"Europe/Kiev"}):"-"),1),(0,o._)("td",null,[(0,o._)("button",{class:"btn btn-danger btn-sm",onClick:t=>i.deleteReservation(e.id)},"Видалити",8,Ur)])])))),128)):((0,o.wg)(),(0,o.iD)("div",br," Порожньо "))])])])):(0,o.kq)("",!0)])}const zr=s(9030);var Cr={name:"AdminPage",data:()=>({pages:[{name:"Відгуки",page:"comments"},{name:"Поїздки",page:"trips"},{name:"Користувачі",page:"users"},{name:"Бронювання",page:"reservations"}],page:"comments",comments:[],users:[],trips:[],reservations:[],ownId:zr.getCurrentUser().id}),created(){zr.isLoggedIn()?(zr.checkPerms().then((e=>{e||this.$router.push("/")})),this.changePage("comments")):this.$router.push("/")},methods:{changePage(e){this.page=e,"comments"==e?zr.adminGetComments().then((e=>{this.comments=e})):"users"==e?zr.adminGetUsers().then((e=>{this.users=e})):"trips"==e?zr.adminGetTrips().then((e=>{this.trips=e})):"reservations"==e&&zr.adminGetReservations().then((e=>{this.reservations=e}))},deleteComment(e){confirm("Ви впевнені, що хочете видалити цей коментар?")&&zr.adminDeleteComment(e).then((()=>{this.comments=this.comments.filter((t=>t.id!=e))}))},deleteUser(e){confirm("Ви впевнені, що хочете видалити цього користувача?")&&zr.adminDeleteUser(e).then((()=>{this.users=this.users.filter((t=>t.id!=e))}))},makeAdminUser(e,t){let s=t?"дати права адміна?":"забрати права адміна?";confirm("Ви впевнені, що хочете "+s)&&zr.adminMakeAdminUser(e,t).then((()=>{this.users=this.users.map((s=>(s.id==e&&(s.is_admin=t),s)))}))},deleteTrip(e){confirm("Ви впевнені, що хочете видалити цю поїздку?")&&zr.adminDeleteTrip(e).then((()=>{this.trips=this.trips.filter((t=>t.id!=e))}))},deleteReservation(e){confirm("Ви впевнені, що хочете видалити це бронювання?")&&zr.adminDeleteReservation(e).then((()=>{this.reservations=this.reservations.filter((t=>t.id!=e))}))}},components:{StarRating:Pe}};const Rr=(0,R.Z)(Cr,[["render",xr],["__scopeId","data-v-ceb8f320"]]);var Ir=Rr;const Sr=(0,o._)("h1",{class:"display-1 font-weight-bold",style:{"font-size":"3em"}}," 404 - Сторінку не знайдено ",-1),Tr={class:"subheading font-weight-regular"};function Pr(e,t,s,n,r,a){const i=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)(o.HY,null,[Sr,(0,o._)("p",Tr,[(0,o.Uk)(" Вибачте, але сторінку, яку ви шукаєте, не існує. Перейдіть "),(0,o.Wm)(i,{to:"/"},{default:(0,o.w5)((()=>[(0,o.Uk)("на головну сторінку")])),_:1}),(0,o.Uk)(". ")])],64)}var Lr={name:"NotFoundPage"};const $r=(0,R.Z)(Lr,[["render",Pr]]);var Wr=$r;const Br=(0,r.p7)({history:(0,r.PO)(),routes:[{path:"/",component:B},{path:"/login",component:ae},{path:"/profile/:id",component:Be},{path:"/profile",component:Be},{path:"/create",component:dt},{path:"/rides",component:Ft},{path:"/rides/:id",component:js},{path:"/reservations",component:On},{path:"/admin",component:Ir},{path:"/:pathMatch(.*)*",component:Wr}]}),Nr=(0,n.ri)(S);Nr.use(Br),Nr.mount("#app")}},t={};function s(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,n,r,o){if(!n){var a=1/0;for(u=0;u<e.length;u++){n=e[u][0],r=e[u][1],o=e[u][2];for(var i=!0,l=0;l<n.length;l++)(!1&o||a>=o)&&Object.keys(s.O).every((function(e){return s.O[e](n[l])}))?n.splice(l--,1):(i=!1,o<a&&(a=o));if(i){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,r,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={826:0};s.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,o,a=n[0],i=n[1],l=n[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(r in i)s.o(i,r)&&(s.m[r]=i[r]);if(l)var u=l(s)}for(t&&t(n);c<a.length;c++)o=a[c],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(u)},n=self["webpackChunkblablacar"]=self["webpackChunkblablacar"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=s.O(void 0,[998],(function(){return s(2316)}));n=s.O(n)})();
//# sourceMappingURL=index.d985cb6b.js.map